<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teste Direto - CMS</title>
</head>
<body>
  <h1>Teste Direto do CMS</h1>
  <p>Esta página deve abrir o CMS diretamente.</p>
  
  <div id="cms"></div>

  <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>
  <script>
    // Aguardar o CMS carregar
    function waitForCMS() {
      if (typeof CMS !== 'undefined') {
        console.log('CMS carregado, inicializando...');
        
        // Inicializar o CMS diretamente
        CMS.init({
          config: {
            backend: {
              name: 'local',
              local_backend: true
            },
            local_backend: true,
            media_folder: "public/images/uploads",
            public_folder: "/images/uploads",
            collections: [
              {
                name: "blog",
                label: "Blog Posts",
                folder: "public/blog-posts",
                create: true,
                slug: "{{year}}-{{month}}-{{day}}-{{slug}}",
                fields: [
                  {label: "Título", name: "title", widget: "string", required: true},
                  {label: "Autor", name: "author", widget: "string", required: true},
                  {label: "Data", name: "date", widget: "datetime", required: true},
                  {label: "Categoria", name: "category", widget: "select", options: ["Energia Solar", "Energia Eólica", "Eficiência Energética", "Sustentabilidade", "Tecnologia"], required: true},
                  {label: "Resumo", name: "excerpt", widget: "text", required: true},
                  {label: "Conteúdo", name: "content", widget: "markdown", required: true},
                  {label: "Imagem de Capa", name: "coverImage", widget: "image", required: false},
                  {label: "Tags", name: "tags", widget: "list", required: false},
                  {label: "Meta Description", name: "metaDescription", widget: "text", required: false},
                  {label: "Keywords", name: "keywords", widget: "text", required: false}
                ]
              }
            ]
          }
        });
        
        console.log('CMS inicializado com sucesso!');
      } else {
        console.log('CMS ainda não carregou, aguardando...');
        setTimeout(waitForCMS, 100);
      }
    }

    // Iniciar após o carregamento da página
    window.addEventListener('load', () => {
      console.log('Página carregada, aguardando CMS...');
      setTimeout(waitForCMS, 500);
    });
  </script>
</body>
</html>
