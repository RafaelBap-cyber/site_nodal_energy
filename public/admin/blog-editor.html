<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Editor de Blog - Nodal Energy</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f8fafc;
      color: #1e293b;
      line-height: 1.6;
    }
    
    .editor-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .editor-header {
      background: linear-gradient(135deg, #059669 0%, #0ea5e9 100%);
      color: white;
      padding: 2rem;
      border-radius: 12px;
      margin-bottom: 2rem;
      text-align: center;
    }
    
    .editor-title {
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    
    .editor-subtitle {
      opacity: 0.9;
      font-size: 1.1rem;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
    }
    
    .form-group.full-width {
      grid-column: 1 / -1;
    }
    
    .form-label {
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #374151;
    }
    
    .form-input, .form-select, .form-textarea {
      padding: 0.75rem;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s ease;
    }
    
    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: #059669;
      box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
    }
    
    .form-textarea {
      min-height: 200px;
      resize: vertical;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    }
    
    .content-editor {
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      overflow: hidden;
    }
    
    .editor-toolbar {
      background: #f3f4f6;
      padding: 0.75rem;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    
    .toolbar-btn {
      background: white;
      border: 1px solid #d1d5db;
      padding: 0.5rem 0.75rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.875rem;
      transition: all 0.2s ease;
    }
    
    .toolbar-btn:hover {
      background: #f9fafb;
      border-color: #9ca3af;
    }
    
    .toolbar-btn.active {
      background: #059669;
      color: white;
      border-color: #059669;
    }
    
    .toolbar-select {
      background: white;
      border: 1px solid #d1d5db;
      padding: 0.5rem 0.75rem;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 120px;
      height: 36px;
      font-size: 0.875rem;
    }
    
    .toolbar-select:hover {
      border-color: #9ca3af;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .toolbar-select:focus {
      outline: none;
      border-color: #059669;
      box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
    }
    
    .toolbar-separator {
      width: 1px;
      height: 24px;
      background: #d1d5db;
      margin: 0 0.25rem;
    }
    
    .toolbar-info {
      display: flex;
      align-items: center;
      padding: 0 0.5rem;
    }
    
    .toolbar-tip {
      font-size: 12px;
      color: #6b7280;
      font-style: italic;
      white-space: nowrap;
    }
    
    .content-area {
      padding: 1rem;
      min-height: 400px;
      outline: none;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .content-area:empty::before {
      content: 'Digite o conte√∫do do seu post aqui...';
      color: #9ca3af;
    }
    
    /* Estilos para imagens no editor */
    .content-area img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      margin: 1rem 0;
      display: block;
    }
    
    .content-area img:hover {
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
      transition: all 0.3s ease;
    }
    
    /* Estilos para imagens edit√°veis */
    .content-area .editable-image {
      cursor: pointer;
      position: relative;
      border: 2px solid transparent;
      transition: all 0.3s ease;
    }
    
    .content-area .editable-image:hover {
      border-color: #059669;
      box-shadow: 0 6px 20px rgba(5, 150, 105, 0.2);
    }
    
    .content-area .editable-image::after {
      content: 'üñºÔ∏è Clique para editar';
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: #059669;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
      white-space: nowrap;
    }
    
    .content-area .editable-image:hover::after {
      opacity: 1;
    }
    
    .content-area .editable-image.image-edited {
      border-color: #f59e0b;
      box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2);
    }
    
    .content-area .editable-image.image-edited::after {
      content: '‚úèÔ∏è Editada';
      background: #f59e0b;
    }
    
    /* Estilos para redimensionamento de imagens */
    .content-area .editable-image.resizing {
      position: relative;
      z-index: 998;
    }
    
    .resize-handles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 999;
    }
    
    .resize-handle {
      position: absolute;
      width: 12px;
      height: 12px;
      background: #059669;
      border: 2px solid white;
      border-radius: 50%;
      pointer-events: all;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      transition: all 0.2s ease;
    }
    
    .resize-handle:hover {
      background: #047857;
      transform: scale(1.2);
    }
    
    .resize-instructions {
      position: absolute;
      top: -40px;
      left: 50%;
      transform: translateX(-50%);
      background: #059669;
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    
    /* Estilos para modo de movimento */
    .move-mode-active .editable-image {
      cursor: move;
      border: 2px solid transparent;
      transition: all 0.3s ease;
    }
    
    .move-mode-active .editable-image:hover {
      border-color: #0ea5e9;
      box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
      transform: translateY(-2px);
    }
    
    .move-mode-active .editable-image::after {
      content: 'üöÄ Alt + clique para mover';
      background: #0ea5e9;
    }
    
    /* Estilos para drag and drop */
    .editable-image.dragging {
      position: relative;
      z-index: 999;
    }
    
    .image-drag-preview {
      position: fixed;
      pointer-events: none;
      z-index: 10000;
      border: 2px dashed #059669;
      border-radius: 8px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      opacity: 0.7;
    }
    
    .drop-indicator {
      position: fixed;
      pointer-events: none;
      z-index: 9999;
      background: linear-gradient(90deg, #059669, #0ea5e9);
      border-radius: 2px;
      box-shadow: 0 2px 8px rgba(5, 150, 105, 0.4);
    }
    
    /* Indicador visual para modo de movimento ativo */
    .toolbar-btn[data-command="toggleMoveMode"].active {
      background: #0ea5e9;
      color: white;
      border-color: #0ea5e9;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .actions {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: 2rem;
    }
    
    .btn {
      padding: 0.75rem 2rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #059669 0%, #0ea5e9 100%);
      color: white;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(5, 150, 105, 0.3);
    }
    
    .btn-secondary {
      background: #6b7280;
      color: white;
    }
    
    .btn-secondary:hover {
      background: #4b5563;
    }
    
    .btn-danger {
      background: #ef4444;
      color: white;
    }
    
    .btn-danger:hover {
      background: #dc2626;
    }
    
    .preview-container {
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      padding: 2rem;
      margin-top: 2rem;
      display: none;
    }
    
    .preview-container.show {
      display: block;
    }
    
    .preview-title {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: #1f2937;
    }
    
    .preview-meta {
      background: #f3f4f6;
      padding: 1rem;
      border-radius: 6px;
      margin-bottom: 1.5rem;
      font-size: 0.875rem;
      color: #6b7280;
    }
    
    .preview-content {
      line-height: 1.8;
      color: #374151;
    }
    
    .preview-content h1, .preview-content h2, .preview-content h3 {
      margin: 1.5rem 0 1rem 0;
      color: #1f2937;
    }
    
    .preview-content p {
      margin-bottom: 1rem;
    }
    
    .preview-content blockquote {
      border-left: 4px solid #059669;
      padding-left: 1rem;
      margin: 1.5rem 0;
      font-style: italic;
      color: #6b7280;
    }
    
    .preview-content code {
      background: #f3f4f6;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.875rem;
    }
    
    .preview-content pre {
      background: #1f2937;
      color: #f9fafb;
      padding: 1rem;
      border-radius: 6px;
      overflow-x: auto;
      margin: 1.5rem 0;
    }
    
    .preview-content pre code {
      background: none;
      color: inherit;
      padding: 0;
    }
    
    .status-message {
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 0;
      display: none;
    }
    
    .status-success {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      color: #059669;
    }
    
    .status-error {
      background: #fef2f2;
      border: 1px solid #fecaca;
      color: #dc2626;
    }
    
    .status-info {
      background: #eff6ff;
      border: 1px solid #bfdbfe;
      color: #2563eb;
    }
    
    .posts-list {
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      padding: 1rem;
      margin-top: 2rem;
      max-height: 300px;
      overflow-y: auto;
    }
    
    .post-item {
      padding: 0.75rem;
      border-bottom: 1px solid #e5e7eb;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    
    .post-item:hover {
      background-color: #f9fafb;
    }
    
    .post-item:last-child {
      border-bottom: none;
    }
    
    .post-title {
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 0.25rem;
    }
    
    .post-meta {
      font-size: 0.875rem;
      color: #6b7280;
    }
    
    @media (max-width: 768px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
      
      .actions {
        flex-direction: column;
        align-items: center;
      }
      
      .btn {
        width: 100%;
        max-width: 300px;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="editor-container">
    <div class="editor-header">
      <h1 class="editor-title">Editor de Blog - Nodal Energy</h1>
      <p class="editor-subtitle">Crie e edite posts para o seu site</p>
    </div>
    
    <div id="status-message" class="status-message"></div>
    
    <form id="blog-form">
      <div class="form-grid">
        <div class="form-group">
          <label for="title" class="form-label">T√≠tulo do Post *</label>
          <input type="text" id="title" name="title" class="form-input" required placeholder="Digite o t√≠tulo do post">
        </div>
        
        <div class="form-group">
          <label for="author" class="form-label">Autor *</label>
          <input type="text" id="author" name="author" class="form-input" required placeholder="Nome do autor">
        </div>
        
        <div class="form-group">
          <label for="category" class="form-label">Categoria *</label>
          <select id="category" name="category" class="form-select" required>
            <option value="">Selecione uma categoria</option>
            <option value="Energia Solar">Energia Solar</option>
            <option value="Energia E√≥lica">Energia E√≥lica</option>
            <option value="Efici√™ncia Energ√©tica">Efici√™ncia Energ√©tica</option>
            <option value="Sustentabilidade">Sustentabilidade</option>
            <option value="Tecnologia">Tecnologia</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="excerpt" class="form-label">Resumo *</label>
          <textarea id="excerpt" name="excerpt" class="form-textarea" required placeholder="Breve descri√ß√£o do post"></textarea>
        </div>
        
        <div class="form-group full-width">
          <label for="content" class="form-label">Conte√∫do *</label>
          <div class="content-editor">
            <div class="editor-toolbar">
              <button type="button" class="toolbar-btn" data-command="bold" title="Negrito (Ctrl+B)">
                <strong>B</strong>
              </button>
              <button type="button" class="toolbar-btn" data-command="italic" title="It√°lico (Ctrl+I)">
                <em>I</em>
              </button>
              <button type="button" class="toolbar-btn" data-command="underline" title="Sublinhado (Ctrl+U)">
                <u>U</u>
              </button>
              
              <div class="toolbar-separator"></div>
              
              <select class="toolbar-select" id="fontSize" title="Tamanho da fonte">
                <option value="1">8px</option>
                <option value="2">10px</option>
                <option value="3" selected>12px</option>
                <option value="4">14px</option>
                <option value="5">16px</option>
                <option value="6">18px</option>
                <option value="7">24px</option>
              </select>
              
              <div class="toolbar-separator"></div>
              
              <button type="button" class="toolbar-btn" data-command="createLink" title="Inserir link">
                üîó Link
              </button>
              <button type="button" class="toolbar-btn" data-command="insertImage" title="Inserir imagem">
                üñºÔ∏è Imagem
              </button>
              <button type="button" class="toolbar-btn" data-command="editSelectedImage" title="Editar imagem selecionada">
                ‚úèÔ∏è Editar
              </button>
              <button type="button" class="toolbar-btn" data-command="toggleMoveMode" title="Alternar modo de movimento (Alt + clique para mover imagens)">
                üöÄ Mover
              </button>
              
              <div class="toolbar-separator"></div>
              
              <div class="toolbar-info">
                <span class="toolbar-tip">üí° Dica: Use Ctrl+V para colar imagens | Alt + clique para mover</span>
              </div>
            </div>
            <div id="content" class="content-area" contenteditable="true"></div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="tags" class="form-label">Tags</label>
          <input type="text" id="tags" name="tags" class="form-input" placeholder="tag1, tag2, tag3">
        </div>
        
        <div class="form-group">
          <label for="coverImage" class="form-label">Imagem de Capa</label>
          <input type="file" id="coverImage" name="coverImage" class="form-input" accept="image/*">
        </div>
      </div>
      
      <div class="actions">
        <button type="button" class="btn btn-secondary" onclick="previewPost()">
          üëÅÔ∏è Visualizar
        </button>
        <button type="button" class="btn btn-primary" onclick="savePost()">
          üíæ Salvar Post
        </button>
        <button type="button" class="btn btn-danger" onclick="clearForm()">
          üóëÔ∏è Limpar
        </button>
      </div>
    </form>
    
    <div id="preview-container" class="preview-container">
      <h2 class="preview-title" id="preview-title"></h2>
      <div class="preview-meta" id="preview-meta"></div>
      <div class="preview-content" id="preview-content"></div>
    </div>
    
    <!-- Lista de Posts Existentes -->
    <div class="posts-list">
      <h3 class="form-label mb-3">Posts Existentes</h3>
      <div id="existing-posts"></div>
    </div>
  </div>

  <script>
    let currentPost = null;
    
    // Inicializar editor
    document.addEventListener('DOMContentLoaded', function() {
      initializeEditor();
      loadExistingPosts();
    });
    
    function initializeEditor() {
      // Configurar toolbar
      document.querySelectorAll('.toolbar-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const command = this.dataset.command;
          const value = this.dataset.value;
          
                               if (command === 'createLink') {
            const url = prompt('Digite a URL:');
            if (url) {
              const linkText = prompt('Digite o texto do link:', url);
              if (linkText) {
                document.execCommand('insertHTML', false, `<a href="${url}" target="_blank">${linkText}</a>`);
              }
            }
          } else if (command === 'insertImage') {
            const imageUrl = prompt('Digite a URL da imagem:');
            if (imageUrl) {
              const altText = prompt('Digite o texto alternativo da imagem (alt):', '');
              const width = prompt('Digite a largura da imagem (em px, deixe vazio para autom√°tico):', '');
              const height = prompt('Digite a altura da imagem (em px, deixe vazio para autom√°tico):', '');
              
              let style = 'max-width: 100%; margin: 1rem 0;';
              if (width) style += ` width: ${width}px;`;
              if (height) style += ` height: ${height}px;`;
              if (!width && !height) style += ' height: auto;';
              
              const imageHTML = `<img src="${imageUrl}" alt="${altText}" style="${style}" class="editable-image" data-original-width="${width || 'auto'}" data-original-height="${height || 'auto'}">`;
              document.execCommand('insertHTML', false, imageHTML);
            }
          } else if (command === 'editSelectedImage') {
            const selection = window.getSelection();
            if (selection.rangeCount > 0) {
              const range = selection.getRangeAt(0);
              let imgElement = range.commonAncestorContainer;
              
              // Procurar pela imagem mais pr√≥xima
              while (imgElement && imgElement.nodeType !== Node.ELEMENT_NODE) {
                imgElement = imgElement.parentElement;
              }
              
              if (imgElement && imgElement.tagName === 'IMG') {
                editImage(imgElement);
              } else {
                alert('Selecione uma imagem para editar');
              }
            } else {
              alert('Selecione uma imagem para editar');
            }
          } else if (command === 'toggleMoveMode') {
            const moveMode = !document.body.classList.contains('move-mode-active');
            
            if (moveMode) {
              document.body.classList.add('move-mode-active');
              this.classList.add('active');
              showToast('üöÄ Modo de movimento ativado! Alt + clique nas imagens para mov√™-las.', 'info');
            } else {
              document.body.classList.remove('move-mode-active');
              this.classList.remove('active');
              showToast('‚úÖ Modo de movimento desativado.', 'info');
            }
          } else {
            document.execCommand(command, false, value);
          }
          
          // Atualizar estado dos bot√µes
          updateToolbarState();
        });
      });
      
      // Configurar seletor de tamanho de fonte
      const fontSize = document.getElementById('fontSize');
      if (fontSize) {
        fontSize.addEventListener('change', function() {
          document.execCommand('fontSize', false, this.value);
        });
      }
      
      // Permitir edi√ß√£o de imagens ao clicar
      document.getElementById('content').addEventListener('click', function(e) {
        if (e.target.tagName === 'IMG' && e.target.classList.contains('editable-image')) {
          editImage(e.target);
        }
      });
      
      // Permitir redimensionamento de imagens com duplo clique
      document.getElementById('content').addEventListener('dblclick', function(e) {
        if (e.target.tagName === 'IMG' && e.target.classList.contains('editable-image')) {
          enableImageResize(e.target);
        }
      });
      
      // Permitir mover imagens (drag and drop)
      document.getElementById('content').addEventListener('mousedown', function(e) {
        if (e.target.tagName === 'IMG' && e.target.classList.contains('editable-image') && e.altKey) {
          // Alt + clique para ativar modo de movimento
          e.preventDefault();
          startImageDrag(e.target, e);
        }
      });
      
      // Sistema simples de movimento: clique e arraste
      let isDragging = false;
      let draggedImage = null;
      let dragOffset = { x: 0, y: 0 };
      
      document.getElementById('content').addEventListener('mousedown', function(e) {
        if (e.target.tagName === 'IMG' && e.target.classList.contains('editable-image')) {
          if (document.body.classList.contains('move-mode-active')) {
            isDragging = true;
            draggedImage = e.target;
            
            const rect = draggedImage.getBoundingClientRect();
            dragOffset.x = e.clientX - rect.left;
            dragOffset.y = e.clientY - rect.top;
            
            draggedImage.style.position = 'fixed';
            draggedImage.style.zIndex = '10000';
            draggedImage.style.pointerEvents = 'none';
            draggedImage.style.opacity = '0.8';
            
            e.preventDefault();
          }
        }
      });
      
      document.addEventListener('mousemove', function(e) {
        if (isDragging && draggedImage) {
          draggedImage.style.left = (e.clientX - dragOffset.x) + 'px';
          draggedImage.style.top = (e.clientY - dragOffset.y) + 'px';
        }
      });
      
      document.addEventListener('mouseup', function(e) {
        if (isDragging && draggedImage) {
          // Restaurar estilos da imagem
          draggedImage.style.position = '';
          draggedImage.style.zIndex = '';
          draggedImage.style.pointerEvents = '';
          draggedImage.style.opacity = '';
          draggedImage.style.left = '';
          draggedImage.style.top = '';
          
          // Mover para o final do conte√∫do
          const contentArea = document.getElementById('content');
          if (contentArea !== draggedImage.parentNode) {
            if (draggedImage.parentNode) {
              draggedImage.parentNode.removeChild(draggedImage);
            }
            contentArea.appendChild(draggedImage);
            
            // Adicionar quebra de linha
            const br = document.createElement('br');
            contentArea.appendChild(br);
            
            showToast('‚úÖ Imagem movida com sucesso!', 'success');
          }
          
          isDragging = false;
          draggedImage = null;
        }
      });
      
      // Atalhos de teclado para movimento
      document.addEventListener('keydown', function(e) {
        if (e.altKey && e.key === 'm') {
          e.preventDefault();
          const moveButton = document.querySelector('[data-command="toggleMoveMode"]');
          if (moveButton) {
            moveButton.click();
          }
        }
      });
      
      // Atalhos de teclado
      document.getElementById('content').addEventListener('keydown', function(e) {
        if (e.ctrlKey || e.metaKey) {
          switch(e.key) {
            case 'b':
              e.preventDefault();
              document.execCommand('bold', false);
              break;
            case 'i':
              e.preventDefault();
              document.execCommand('italic', false);
              break;
            case 'u':
              e.preventDefault();
              document.execCommand('underline', false);
              break;
          }
          updateToolbarState();
        }
        
        // Movimento de imagens com setas (quando modo ativo)
        if (document.body.classList.contains('move-mode-active')) {
          const selectedImage = document.querySelector('.editable-image:focus');
          if (selectedImage && ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
            e.preventDefault();
            moveImageWithArrows(selectedImage, e.key);
          }
        }
      });
      
      // Permitir colar imagens (Ctrl+V)
      document.getElementById('content').addEventListener('paste', function(e) {
        const items = (e.clipboardData || e.originalEvent.clipboardData).items;
        let imageFound = false;
        
        for (let item of items) {
          if (item.type.indexOf('image') !== -1) {
            e.preventDefault();
            imageFound = true;
            
            const blob = item.getAsFile();
            if (!blob) {
              showToast('‚ùå Erro ao processar imagem do clipboard', 'error');
              return;
            }
            
            // Verificar tamanho do arquivo (m√°ximo 10MB)
            if (blob.size > 10 * 1024 * 1024) {
              showToast('‚ùå Imagem muito grande. M√°ximo 10MB permitido.', 'error');
              return;
            }
            
            const reader = new FileReader();
            
            reader.onload = function(event) {
              const imageData = event.target.result;
              
              // Criar elemento de imagem
              const img = document.createElement('img');
              img.src = imageData;
              img.className = 'editable-image';
              img.style.cssText = 'max-width: 100%; height: auto; margin: 1rem 0;';
              img.setAttribute('data-original-width', 'auto');
              img.setAttribute('data-original-height', 'auto');
              img.setAttribute('alt', 'Imagem colada do clipboard');
              
              // Inserir no cursor atual
              const selection = window.getSelection();
              if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0);
                range.deleteContents();
                range.insertNode(img);
                
                // Mover cursor ap√≥s a imagem
                range.setStartAfter(img);
                range.setEndAfter(img);
                selection.removeAllRanges();
                selection.addRange(range);
              } else {
                // Se n√£o h√° sele√ß√£o, inserir no final
                document.getElementById('content').appendChild(img);
              }
              
              // Focar na imagem inserida
              img.focus();
              
              // Mostrar mensagem de sucesso
              showToast('üñºÔ∏è Imagem colada com sucesso! Clique na imagem para editar o tamanho.', 'success');
            };
            
            reader.onerror = function() {
              showToast('‚ùå Erro ao ler imagem do clipboard', 'error');
            };
            
            reader.readAsDataURL(blob);
            break;
          }
        }
        
        // Se n√£o encontrou imagem, verificar se √© uma URL de imagem
        if (!imageFound) {
          const text = e.clipboardData.getData('text');
          if (text && isImageUrl(text)) {
            e.preventDefault();
            
            // Perguntar se quer inserir como imagem
            if (confirm('URL de imagem detectada. Deseja inserir como imagem?\n\n' + text)) {
              const img = document.createElement('img');
              img.src = text;
              img.className = 'editable-image';
              img.style.cssText = 'max-width: 100%; height: auto; margin: 1rem 0;';
              img.setAttribute('data-original-width', 'auto');
              img.setAttribute('data-original-height', 'auto');
              img.setAttribute('alt', 'Imagem de URL');
              
              // Inserir no cursor atual
              const selection = window.getSelection();
              if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0);
                range.deleteContents();
                range.insertNode(img);
                
                // Mover cursor ap√≥s a imagem
                range.setStartAfter(img);
                range.setEndAfter(img);
                selection.removeAllRanges();
                selection.addRange(range);
              } else {
                // Se n√£o h√° sele√ß√£o, inserir no final
                document.getElementById('content').appendChild(img);
              }
              
              showToast('üñºÔ∏è Imagem de URL inserida com sucesso!', 'success');
            }
          }
          // Permitir colar texto normalmente
          return;
        }
      });
      
      // Auto-save
      setInterval(autoSave, 30000); // Salvar a cada 30 segundos
    }
    
    function editImage(imgElement) {
      const currentWidth = imgElement.style.width || 'auto';
      const currentHeight = imgElement.style.height || 'auto';
      
      const newWidth = prompt('Digite a nova largura da imagem (em px, deixe vazio para autom√°tico):', currentWidth === 'auto' ? '' : currentWidth.replace('px', ''));
      const newHeight = prompt('Digite a nova altura da imagem (em px, deixe vazio para autom√°tico):', currentHeight === 'auto' ? '' : currentHeight.replace('px', ''));
      
      if (newWidth !== null && newHeight !== null) {
        let style = 'max-width: 100%; margin: 1rem 0;';
        if (newWidth) style += ` width: ${newWidth}px;`;
        if (newHeight) style += ` height: ${newHeight}px;`;
        if (!newWidth && !newHeight) style += ' height: auto;';
        
        imgElement.style.cssText = style;
        imgElement.setAttribute('data-original-width', newWidth || 'auto');
        imgElement.setAttribute('data-original-height', newHeight || 'auto');
        
        // Adicionar indicador visual de que foi editada
        imgElement.classList.add('image-edited');
      }
    }
    
    function enableImageResize(imgElement) {
      // Remover redimensionamento anterior se existir
      if (imgElement.classList.contains('resizing')) {
        disableImageResize(imgElement);
        return;
      }
      
      imgElement.classList.add('resizing');
      
      // Criar handles de redimensionamento
      const handles = createResizeHandles(imgElement);
      imgElement.parentNode.insertBefore(handles, imgElement.nextSibling);
      
      // Adicionar indicador visual
      imgElement.style.border = '2px solid #059669';
      imgElement.style.cursor = 'move';
      
      // Adicionar instru√ß√µes
      const instructions = document.createElement('div');
      instructions.className = 'resize-instructions';
      instructions.innerHTML = 'üñ±Ô∏è Arraste os cantos para redimensionar | Clique duplo para sair';
      instructions.style.cssText = 'position: absolute; top: -40px; left: 50%; transform: translateX(-50%); background: #059669; color: white; padding: 8px 12px; border-radius: 6px; font-size: 12px; white-space: nowrap; z-index: 1000;';
      imgElement.parentNode.insertBefore(instructions, imgElement.nextSibling);
    }
    
    function disableImageResize(imgElement) {
      imgElement.classList.remove('resizing');
      imgElement.style.border = '';
      imgElement.style.cursor = '';
      
      // Remover handles e instru√ß√µes
      const handles = imgElement.parentNode.querySelector('.resize-handles');
      const instructions = imgElement.parentNode.querySelector('.resize-instructions');
      if (handles) handles.remove();
      if (instructions) instructions.remove();
      
      // Salvar dimens√µes finais
      const finalWidth = imgElement.style.width;
      const finalHeight = imgElement.style.height;
      if (finalWidth || finalHeight) {
        imgElement.classList.add('image-edited');
        imgElement.setAttribute('data-original-width', finalWidth || 'auto');
        imgElement.setAttribute('data-original-height', finalHeight || 'auto');
      }
    }
    
    function createResizeHandles(imgElement) {
      const handles = document.createElement('div');
      handles.className = 'resize-handles';
      handles.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999;';
      
      const positions = ['nw', 'ne', 'sw', 'se'];
      positions.forEach(pos => {
        const handle = document.createElement('div');
        handle.className = `resize-handle resize-${pos}`;
        handle.style.cssText = `
          position: absolute;
          width: 12px;
          height: 12px;
          background: #059669;
          border: 2px solid white;
          border-radius: 50%;
          pointer-events: all;
          cursor: ${pos.includes('n') ? 'n' : 's'}-${pos.includes('w') ? 'w' : 'e'}-resize;
        `;
        
        // Posicionar handles
        if (pos.includes('n')) handle.style.top = '-6px';
        if (pos.includes('s')) handle.style.bottom = '-6px';
        if (pos.includes('w')) handle.style.left = '-6px';
        if (pos.includes('e')) handle.style.right = '-6px';
        
        // Adicionar funcionalidade de redimensionamento
        handle.addEventListener('mousedown', (e) => startResize(e, imgElement, pos));
        
        handles.appendChild(handle);
      });
      
      return handles;
    }
    
    function startResize(e, imgElement, handle) {
      e.preventDefault();
      e.stopPropagation();
      
      const startX = e.clientX;
      const startY = e.clientY;
      const startWidth = imgElement.offsetWidth;
      const startHeight = imgElement.offsetHeight;
      
      function onMouseMove(e) {
        const deltaX = e.clientX - startX;
        const deltaY = e.clientY - startY;
        
        let newWidth = startWidth;
        let newHeight = startHeight;
        
        if (handle.includes('e')) newWidth = startWidth + deltaX;
        if (handle.includes('w')) newWidth = startWidth - deltaX;
        if (handle.includes('s')) newHeight = startHeight + deltaY;
        if (handle.includes('n')) newHeight = startHeight - deltaY;
        
        // Manter propor√ß√£o m√≠nima
        newWidth = Math.max(50, newWidth);
        newHeight = Math.max(50, newHeight);
        
        imgElement.style.width = newWidth + 'px';
        imgElement.style.height = newHeight + 'px';
      }
      
      function onMouseUp() {
        document.removeEventListener('mousemove', onMouseMove);
        document.removeEventListener('mouseup', onMouseUp);
      }
      
      document.addEventListener('mousemove', onMouseMove);
      document.addEventListener('mouseup', onMouseUp);
    }
    
    function startImageDrag(imgElement, e) {
      if (imgElement.classList.contains('dragging')) return;
      
      imgElement.classList.add('dragging');
      
      // Criar clone para preview durante o drag
      const clone = imgElement.cloneNode(true);
      clone.style.cssText = `
        position: fixed;
        top: ${e.clientY - imgElement.offsetHeight / 2}px;
        left: ${e.clientX - imgElement.offsetWidth / 2}px;
        width: ${imgElement.offsetWidth}px;
        height: ${imgElement.offsetHeight}px;
        opacity: 0.7;
        pointer-events: none;
        z-index: 10000;
        border: 2px dashed #059669;
        border-radius: 8px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      `;
      clone.className = 'image-drag-preview';
      document.body.appendChild(clone);
      
      // Marcar posi√ß√£o original
      const originalRect = imgElement.getBoundingClientRect();
      imgElement.setAttribute('data-original-position', JSON.stringify({
        top: originalRect.top,
        left: originalRect.left
      }));
      
      // Adicionar indicador visual na imagem original
      imgElement.style.opacity = '0.3';
      imgElement.style.border = '2px dashed #059669';
      
      // Fun√ß√£o para mover o clone
      function onMouseMove(e) {
        clone.style.top = (e.clientY - imgElement.offsetHeight / 2) + 'px';
        clone.style.left = (e.clientX - imgElement.offsetWidth / 2) + 'px';
        
        // Mostrar indicador de posi√ß√£o de inser√ß√£o
        showDropIndicator(e.clientX, e.clientY);
        
        // Atualizar indicador em tempo real
        updateDropIndicator(e.clientX, e.clientY);
      }
      
      // Fun√ß√£o para finalizar o drag
      function onMouseUp(e) {
        document.removeEventListener('mousemove', onMouseMove);
        document.removeEventListener('mouseup', onMouseUp);
        
        // Remover clone
        if (clone.parentNode) {
          clone.remove();
        }
        
        // Remover indicador de drop
        removeDropIndicator();
        
        // Restaurar imagem original
        imgElement.style.opacity = '';
        imgElement.style.border = '';
        imgElement.classList.remove('dragging');
        
        // Mover imagem para nova posi√ß√£o
        moveImageToPosition(imgElement, e.clientX, e.clientY);
      }
      
      document.addEventListener('mousemove', onMouseMove);
      document.addEventListener('mouseup', onMouseUp);
      
      // Debug: mostrar informa√ß√µes da imagem
      console.log('Iniciando drag da imagem:', {
        element: imgElement,
        position: imgElement.getBoundingClientRect(),
        parent: imgElement.parentNode
      });
    }
    
    function showDropIndicator(x, y) {
      removeDropIndicator();
      
      const indicator = document.createElement('div');
      indicator.className = 'drop-indicator';
      indicator.style.cssText = `
        position: fixed;
        top: ${y - 2}px;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(90deg, #059669, #0ea5e9);
        z-index: 9999;
        pointer-events: none;
        border-radius: 2px;
        box-shadow: 0 2px 8px rgba(5, 150, 105, 0.4);
      `;
      
      document.body.appendChild(indicator);
    }
    
    function removeDropIndicator() {
      const existingIndicator = document.querySelector('.drop-indicator');
      if (existingIndicator) {
        existingIndicator.remove();
      }
    }
    
    function updateDropIndicator(x, y) {
      const existingIndicator = document.querySelector('.drop-indicator');
      if (existingIndicator) {
        existingIndicator.style.top = (y - 2) + 'px';
      }
    }
    
    function moveImageToPosition(imgElement, x, y) {
      const contentArea = document.getElementById('content');
      const contentRect = contentArea.getBoundingClientRect();
      
      // Verificar se est√° dentro da √°rea de conte√∫do
      if (x < contentRect.left || x > contentRect.right || y < contentRect.top || y > contentRect.bottom) {
        showToast('‚ö†Ô∏è Imagem movida para fora da √°rea de edi√ß√£o.', 'info');
        return;
      }
      
      // L√≥gica simplificada: inserir no final do contentArea
      if (contentArea !== imgElement.parentNode) {
        // Remover a imagem de sua posi√ß√£o atual
        if (imgElement.parentNode) {
          imgElement.parentNode.removeChild(imgElement);
        }
        
        // Inserir no final do contentArea
        contentArea.appendChild(imgElement);
        
        // Adicionar quebra de linha ap√≥s a imagem
        const br = document.createElement('br');
        contentArea.appendChild(br);
        
        showToast('‚úÖ Imagem movida para o final do texto!', 'success');
      } else {
        showToast('‚ÑπÔ∏è Imagem j√° est√° na posi√ß√£o correta', 'info');
      }
    }
    
    function moveImageWithArrows(imgElement, direction) {
      const contentArea = document.getElementById('content');
      
      // L√≥gica simplificada: mover para o final do contentArea
      if (contentArea !== imgElement.parentNode) {
        // Remover a imagem de sua posi√ß√£o atual
        if (imgElement.parentNode) {
          imgElement.parentNode.removeChild(imgElement);
        }
        
        // Inserir no final do contentArea
        contentArea.appendChild(imgElement);
        
        // Adicionar quebra de linha ap√≥s a imagem
        const br = document.createElement('br');
        contentArea.appendChild(br);
        
        // Focar na imagem movida
        imgElement.focus();
        
        // Mostrar feedback visual
        imgElement.style.border = '2px solid #0ea5e9';
        setTimeout(() => {
          imgElement.style.border = '';
        }, 500);
        
        showToast(`‚úÖ Imagem movida ${direction === 'ArrowUp' ? 'para cima' : direction === 'ArrowDown' ? 'para baixo' : direction === 'ArrowLeft' ? 'para esquerda' : 'para direita'}!`, 'success');
      } else {
        showToast('‚ÑπÔ∏è Imagem j√° est√° na posi√ß√£o correta', 'info');
      }
    }
    
    function isImageUrl(url) {
      try {
        const urlObj = new URL(url);
        const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.bmp', '.svg'];
        const pathname = urlObj.pathname.toLowerCase();
        
        // Verificar extens√£o do arquivo
        const hasImageExtension = imageExtensions.some(ext => pathname.endsWith(ext));
        
        // Verificar se cont√©m palavras-chave de imagem
        const hasImageKeywords = url.includes('image') || url.includes('img') || url.includes('photo') || url.includes('pic');
        
        return hasImageExtension || hasImageKeywords;
      } catch (e) {
        // Se n√£o √© uma URL v√°lida, verificar se parece ser uma URL de imagem
        const imagePatterns = /\.(jpg|jpeg|png|gif|webp|bmp|svg)(\?|$)/i;
        return imagePatterns.test(url);
      }
    }
    
    function showToast(message, type = 'info') {
      // Remover toast anterior se existir
      const existingToast = document.querySelector('.toast-message');
      if (existingToast) {
        existingToast.remove();
      }
      
      // Criar novo toast
      const toast = document.createElement('div');
      toast.className = `toast-message toast-${type}`;
      toast.textContent = message;
      toast.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#059669' : type === 'error' ? '#ef4444' : '#3b82f6'};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 10000;
        font-size: 14px;
        font-weight: 500;
        max-width: 300px;
        word-wrap: break-word;
        animation: slideIn 0.3s ease;
      `;
      
      // Adicionar anima√ß√£o CSS
      const style = document.createElement('style');
      style.textContent = `
        @keyframes slideIn {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        @keyframes slideOut {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(100%);
            opacity: 0;
          }
        }
      `;
      document.head.appendChild(style);
      
      document.body.appendChild(toast);
      
      // Auto-remover ap√≥s 4 segundos
      setTimeout(() => {
        toast.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => {
          if (toast.parentNode) {
            toast.remove();
          }
        }, 300);
      }, 4000);
      
      // Permitir fechar clicando
      toast.addEventListener('click', () => {
        toast.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => {
          if (toast.parentNode) {
            toast.remove();
          }
        }, 300);
      });
    }
    
    function updateToolbarState() {
      document.querySelectorAll('.toolbar-btn').forEach(btn => {
        const command = btn.dataset.command;
        btn.classList.toggle('active', document.queryCommandState(command));
      });
    }
    
    function previewPost() {
      const title = document.getElementById('title').value;
      const author = document.getElementById('author').value;
      const category = document.getElementById('category').value;
      const excerpt = document.getElementById('excerpt').value;
      const content = document.getElementById('content').innerHTML;
      const tags = document.getElementById('tags').value;
      
      if (!title || !author || !category || !excerpt || !content.trim()) {
        showStatus('Preencha todos os campos obrigat√≥rios para visualizar', 'error');
        return;
      }
      
      document.getElementById('preview-title').textContent = title;
      document.getElementById('preview-meta').innerHTML = `
        <strong>Autor:</strong> ${author} | 
        <strong>Categoria:</strong> ${category} | 
        <strong>Data:</strong> ${new Date().toLocaleDateString('pt-BR')}
        ${tags ? ` | <strong>Tags:</strong> ${tags}` : ''}
      `;
      document.getElementById('preview-content').innerHTML = content;
      
      document.getElementById('preview-container').classList.add('show');
      document.getElementById('preview-container').scrollIntoView({ behavior: 'smooth' });
    }
    
    function savePost() {
      const formData = new FormData(document.getElementById('blog-form'));
      const content = document.getElementById('content').innerHTML;
      
      if (!formData.get('title') || !formData.get('author') || !formData.get('category') || 
          !formData.get('excerpt') || !content.trim()) {
        showStatus('Preencha todos os campos obrigat√≥rios', 'error');
        return;
      }
      
      const post = {
        id: currentPost ? currentPost.id : Date.now().toString(),
        title: formData.get('title'),
        author: formData.get('author'),
        category: formData.get('category'),
        excerpt: formData.get('excerpt'),
        content: content,
        tags: formData.get('tags') ? formData.get('tags').split(',').map(t => t.trim()) : [],
        date: new Date().toISOString(),
        slug: generateSlug(formData.get('title')),
        coverImage: formData.get('coverImage') ? formData.get('coverImage').name : null,
        readTime: calculateReadTime(content)
      };
      
      // Salvar no localStorage
      savePostToStorage(post);
      
      // Salvar arquivo Markdown
      savePostToFile(post);
      
      showStatus('Post salvo com sucesso!', 'success');
      currentPost = post;
      
      // Atualizar lista de posts existentes
      loadExistingPosts();
      
      // Limpar formul√°rio ap√≥s salvar
      clearForm();
      
      // Redirecionar para a √°rea de gerenciamento de posts ap√≥s 2 segundos
      setTimeout(() => {
        window.location.href = '/admin/posts-manager.html';
      }, 2000);
    }
    
    function savePostToStorage(post) {
      const posts = JSON.parse(localStorage.getItem('nodalEnergyPosts') || '[]');
      const existingIndex = posts.findIndex(p => p.id === post.id);
      
      if (existingIndex >= 0) {
        posts[existingIndex] = post;
      } else {
        posts.push(post);
      }
      
      localStorage.setItem('nodalEnergyPosts', JSON.stringify(posts));
    }
    
    function savePostToFile(post) {
      // Converter para Markdown
      const markdown = convertToMarkdown(post);
      
      // Criar blob e download
      const blob = new Blob([markdown], { type: 'text/markdown' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${post.slug}.md`;
      a.click();
      URL.revokeObjectURL(url);
    }
    
    function convertToMarkdown(post) {
      let markdown = `---\n`;
      markdown += `title: "${post.title}"\n`;
      markdown += `author: "${post.author}"\n`;
      markdown += `date: "${post.date}"\n`;
      markdown += `category: "${post.category}"\n`;
      markdown += `excerpt: "${post.excerpt}"\n`;
      if (post.tags.length > 0) {
        markdown += `tags: [${post.tags.map(t => `"${t}"`).join(', ')}]\n`;
      }
      if (post.coverImage) {
        markdown += `coverImage: "${post.coverImage}"\n`;
      }
      markdown += `---\n\n`;
      markdown += `# ${post.title}\n\n`;
      markdown += `**Autor:** ${post.author} | **Data:** ${new Date(post.date).toLocaleDateString('pt-BR')} | **Categoria:** ${post.category}\n\n`;
      markdown += `${post.excerpt}\n\n`;
      markdown += `---\n\n`;
      
      // Converter HTML para Markdown simples
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = post.content;
      
      // Processar elementos HTML de forma mais robusta
      let content = tempDiv.innerHTML
        // Remover tags de cabe√ßalho
        .replace(/<h1[^>]*>(.*?)<\/h1>/gi, '\n# $1\n')
        .replace(/<h2[^>]*>(.*?)<\/h2>/gi, '\n## $1\n')
        .replace(/<h3[^>]*>(.*?)<\/h3>/gi, '\n### $1\n')
        // Remover tags de par√°grafo
        .replace(/<p[^>]*>(.*?)<\/p>/gi, '\n$1\n')
        // Remover quebras de linha
        .replace(/<br\s*\/?>/gi, '\n')
        // Converter formata√ß√£o de texto
        .replace(/<strong[^>]*>(.*?)<\/strong>/gi, '**$1**')
        .replace(/<em[^>]*>(.*?)<\/em>/gi, '*$1*')
        .replace(/<u[^>]*>(.*?)<\/u>/gi, '__$1__')
        .replace(/<code[^>]*>(.*?)<\/code>/gi, '`$1`')
        // Converter cita√ß√µes
        .replace(/<blockquote[^>]*>(.*?)<\/blockquote>/gi, '\n> $1\n')
        // Converter listas
        .replace(/<ul[^>]*>(.*?)<\/ul>/gi, '\n$1\n')
        .replace(/<ol[^>]*>(.*?)<\/ol>/gi, '\n$1\n')
        .replace(/<li[^>]*>(.*?)<\/li>/gi, '- $1')
        // Converter links
        .replace(/<a[^>]*href="([^"]*)"[^>]*>(.*?)<\/a>/gi, '[$2]($1)')
        // Limpar tags HTML restantes
        .replace(/<[^>]*>/g, '')
        // Limpar espa√ßos em branco extras
        .replace(/\n\s*\n\s*\n/g, '\n\n')
        .trim();
      
      markdown += content;
      
      return markdown;
    }
    
    function generateSlug(title) {
      return title
        .toLowerCase()
        .replace(/[^a-z0-9\s-]/g, '')
        .replace(/\s+/g, '-')
        .replace(/-+/g, '-')
        .trim();
    }
    
    function calculateReadTime(content) {
      const wordsPerMinute = 200;
      const words = content.split(/\s+/).length;
      const minutes = Math.ceil(words / wordsPerMinute);
      return `${minutes} min`;
    }
    
    function loadExistingPosts() {
      const posts = JSON.parse(localStorage.getItem('nodalEnergyPosts') || '[]');
      const container = document.getElementById('existing-posts');
      
      if (posts.length === 0) {
        container.innerHTML = '<p class="text-gray-500">Nenhum post encontrado</p>';
        return;
      }
      
      container.innerHTML = posts.map(post => `
        <div class="post-item" onclick="loadPost('${post.id}')">
          <div class="post-title">${post.title}</div>
          <div class="post-meta">
            ${post.author} ‚Ä¢ ${post.category} ‚Ä¢ ${new Date(post.date).toLocaleDateString('pt-BR')}
          </div>
        </div>
      `).join('');
    }
    
    function loadPost(postId) {
      const posts = JSON.parse(localStorage.getItem('nodalEnergyPosts') || '[]');
      const post = posts.find(p => p.id === postId);
      
      if (post) {
        currentPost = post;
        document.getElementById('title').value = post.title;
        document.getElementById('author').value = post.author;
        document.getElementById('category').value = post.category;
        document.getElementById('excerpt').value = post.excerpt;
        document.getElementById('content').innerHTML = post.content;
        document.getElementById('tags').value = post.tags ? post.tags.join(', ') : '';
        
        showStatus(`Post "${post.title}" carregado para edi√ß√£o`, 'info');
        
        // Scroll para o topo do formul√°rio
        document.getElementById('blog-form').scrollIntoView({ behavior: 'smooth' });
      }
    }
    
    function clearForm() {
      if (confirm('Tem certeza que deseja limpar o formul√°rio?')) {
        document.getElementById('blog-form').reset();
        document.getElementById('content').innerHTML = '';
        document.getElementById('preview-container').classList.remove('show');
        currentPost = null;
        showStatus('Formul√°rio limpo', 'info');
      }
    }
    
    function autoSave() {
      const title = document.getElementById('title').value;
      const content = document.getElementById('content').innerHTML;
      
      if (title && content.trim()) {
        const draft = {
          title,
          content,
          timestamp: Date.now()
        };
        localStorage.setItem('nodalEnergyDraft', JSON.stringify(draft));
      }
    }
    
    function showStatus(message, type = 'info') {
      const statusDiv = document.getElementById('status-message');
      statusDiv.textContent = message;
      statusDiv.className = `status-message status-${type}`;
      statusDiv.style.display = 'block';
      
      setTimeout(() => {
        statusDiv.style.display = 'none';
      }, 5000);
    }
  </script>
</body>
</html>

